<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard Admin - HR System</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  </head>
  <body>
    <div class="app-container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="avatar-circle">A</div>
          <div>
            <div class="sidebar-role">Admin</div>
            <div class="sidebar-subtitle">Administrator</div>
          </div>
        </div>

        <nav class="sidebar-menu">
          <button class="menu-item active" data-view="profile">
            <i class="fa-solid fa-user-tie" style="width: 20px"></i> Profile
          </button>

          <button class="menu-item" data-view="dashboard">
            <i class="fa-solid fa-chart-line" style="width: 20px"></i> Dashboard Data
          </button>

          <button class="menu-item" data-view="history">
            <i class="fa-solid fa-clock-rotate-left" style="width: 20px"></i> History Pekerjaan
          </button>

          <button class="menu-item" data-view="account">
            <i class="fa-solid fa-gear" style="width: 20px"></i> Account & Data
          </button>
        </nav>
      </aside>

      <div class="main-area">
        <header class="top-nav">
          <div class="search-container-wrapper">
            <div class="search-box-styled">
              <i class="fa-solid fa-magnifying-glass search-icon"></i>
              <input type="text" id="globalSearch" placeholder="Search data dashboard..." />
              <button id="toggleFilterBtn" class="filter-toggle-btn">
                <i class="fa-solid fa-chevron-down"></i>
              </button>
            </div>

            <div id="filterPanel" class="filter-panel hidden">
              <div class="filter-header">
                <div style="flex: 1"><i class="fa-solid fa-filter"></i> Filters</div>
                <button
                  id="resetFilters"
                  style="font-size: 11px; color: #dc2626; border: none; background: none; cursor: pointer"
                >
                  Reset All
                </button>
              </div>
              <div id="allFiltersContainer" class="all-filters-scroll-area">
                <p class="text-muted" style="padding: 10px">Upload CSV/XLSX Data Utama untuk melihat filter.</p>
              </div>
            </div>
          </div>

          <div class="nav-right">
            <span class="nav-username">Admin</span>
            <div class="nav-avatar">A</div>
          </div>
        </header>

        <main class="content">
          <section id="view-profile" class="view active">
            <h1>Profile Admin</h1>
            <div class="card">
              <p><strong>Nama:</strong> Admin</p>
              <p><strong>Role:</strong> Administrator Sistem</p>
              <p><strong>Deskripsi:</strong> Mengelola data karyawan dan history pekerjaan.</p>
            </div>
          </section>

          <section id="view-dashboard" class="view">
            <div class="content-header">
              <h1>Dashboard - Preview Data</h1>
              <p class="subtitle">Data Karyawan Aktif (Master Data)</p>
            </div>

            <div id="noDataMessage" class="info-box">
              Belum ada data utama. Silakan upload file CSV/XLSX di menu <strong>Account</strong>.
            </div>

            <div class="table-wrapper" id="tableWrapper" style="display: none">
              <table>
                <thead></thead>
                <tbody id="csvTableBody"></tbody>
              </table>
            </div>
          </section>

          <section id="view-history" class="view">
            <div class="content-header">
              <h1>History Pekerjaan</h1>
              <p class="subtitle">Rekam jejak dan riwayat pekerjaan karyawan.</p>
            </div>

            <div class="search-container-wrapper" style="margin-bottom: 20px">
              <div class="search-box-styled">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" id="globalSearchHistory" placeholder="Search data history..." />
                <button id="toggleFilterBtnHistory" class="filter-toggle-btn">
                  <i class="fa-solid fa-chevron-down"></i>
                </button>
              </div>

              <div id="filterPanelHistory" class="filter-panel hidden">
                <div class="filter-header">
                  <div style="flex: 1"><i class="fa-solid fa-filter"></i> Filters</div>
                  <button
                    id="resetFiltersHistory"
                    style="font-size: 11px; color: #dc2626; border: none; background: none; cursor: pointer"
                  >
                    Reset All
                  </button>
                </div>
                <div id="allFiltersContainerHistory" class="all-filters-scroll-area">
                  <p class="text-muted" style="padding: 10px">Upload CSV/XLSX History untuk melihat filter.</p>
                </div>
              </div>
            </div>

            <div id="noHistoryMessage" class="info-box">
              Belum ada data History. Silakan upload file CSV/XLSX History di menu <strong>Account</strong>.
            </div>

            <div class="table-wrapper" id="historyTableWrapper" style="display: none">
              <table>
                <thead id="historyTableHead"></thead>
                <tbody id="historyTableBody"></tbody>
              </table>
            </div>
          </section>

          <section id="view-account" class="view">
            <div class="content-header">
              <h1>Account & Data Management</h1>
              <p class="subtitle">Pusat pengelolaan database lokal.</p>
            </div>

            <div class="card upload-card" style="margin-bottom: 20px">
              <h3 style="margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px">
                <i class="fa-solid fa-database"></i> 1. Data Utama (Dashboard)
              </h3>

              <div class="info-box" style="margin-top: 10px; padding: 8px">
                Status: <span id="dbStatusText" style="font-weight: bold">Memeriksa...</span>
              </div>

              <div style="display: flex; gap: 10px; margin-top: 15px; align-items: center">
                <input type="file" id="csvInput" accept=".csv,.xlsx" style="display: none" />
                <button id="btnUploadCsv" class="btn-primary">
                  <i class="fa-solid fa-upload"></i> Upload CSV/XLSX Utama
                </button>
                <button id="btnDeleteDb" class="btn-danger" style="display: none">
                  <i class="fa-solid fa-trash"></i> Hapus
                </button>
              </div>
              <p id="uploadStatus" class="status-text"></p>
            </div>

            <div class="card upload-card">
              <h3 style="margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px">
                <i class="fa-solid fa-clock-rotate-left"></i> 2. Data History Pekerjaan
              </h3>

              <div
                class="info-box"
                style="margin-top: 10px; padding: 8px; background-color: #fff7ed; border-color: #ffedd5; color: #9a3412"
              >
                Status: <span id="historyStatusText" style="font-weight: bold">Memeriksa...</span>
              </div>

              <div style="display: flex; gap: 10px; margin-top: 15px; align-items: center">
                <input type="file" id="csvHistoryInput" accept=".csv,.xlsx" style="display: none" />
                <button id="btnUploadHistory" class="btn-primary" style="background-color: #0d9488; color: white">
                  <i class="fa-solid fa-upload"></i> Upload CSV/XLSX History
                </button>
                <button id="btnDeleteHistory" class="btn-danger" style="display: none">
                  <i class="fa-solid fa-trash"></i> Hapus
                </button>
              </div>
              <p id="uploadHistoryStatus" class="status-text"></p>
            </div>
          </section>
        </main>
      </div>
    </div>

    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
